<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>NEXTATION ‚Äì Modal Verbs (Can, Must, Should)</title>
  <style>
    :root {
      /* NEXTATION WEBSITE ‚Äî COLOUR SYSTEM (from your PDF) */
      --bg-main: #02030b; /* Page background */
      --bg-gradient: radial-gradient(circle at top, #1c1f3b 0%, #050716 45%, #02030b 100%);
      /* Surfaces / Cards */
      --card-bg: rgba(15, 18, 40, 0.92);        /* Lesson panels */
      --card-soft-bg: rgba(18, 21, 50, 0.88);   /* Tab cards and navigation buttons */
      /* Neon accents */
      --accent-cyan: #4ef2ff;   /* Cyan highlight around edges */
      --accent-pink: #ff2f92;   /* Magenta highlight for buttons */
      --accent-green: #4dff9b;  /* Success / tab completed mark */
      --accent-yello: #ffe25f;  /* Accent blended in text gradients */
      --accent-purple: #aa5dff; /* Hover glows and edges */
      /* Text and borders */
      --muted: rgba(255,255,255,0.65);
      --border-glow: rgba(120,120,255,0.45);
      /* Shadows */
      --shadow-strong: 0 0 36px rgba(130,80,255,0.6);
      --shadow-soft: 0 0 20px rgba(0,0,0,0.65);
      /* Radii and transitions */
      --radius-lg: 22px;
      --radius-md: 16px;
      --radius-sm: 10px;
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.28s ease-out;
    }

    *{box-sizing:border-box;margin:0;padding:0;}
    body{
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:var(--bg-gradient);
      color:#fff;
      min-height:100vh;
      padding:32px 24px; /* Increased padding for more overall space */
      display:flex;
      justify-content:center;
      line-height:1.8; /* Increased line height for better readability */
    }
    .app{max-width:1100px;width:100%;}

    /* HEADER */
    .neon-header{
      position:relative;
      padding:22px 24px 18px;
      border-radius:var(--radius-lg);
      background:rgba(3,5,20,0.9);
      box-shadow:var(--shadow-soft);
      border:1px solid var(--border-glow);
      margin-bottom:32px; /* Increased margin-bottom */
      overflow:hidden;
    }
    .neon-header::before{
      content:"";
      position:absolute;
      inset:-1px;
      background:linear-gradient(90deg,#00f5ff,#ff2f92,#ffe25f,#4dff9b);
      opacity:0.5;
      mix-blend-mode:screen;
      pointer-events:none;
      z-index:-1;
    }
    .header-main{display:flex;align-items:center;gap:20px;margin-bottom:12px;} /* Increased gap and margin */
    .teacher-orb{
      width:68px;height:68px;border-radius:50%;
      background:radial-gradient(circle,#ffffff 0%,#00fff0 35%,#ff2f92 70%,#02030b 100%);
      box-shadow:0 0 24px rgba(0,255,255,0.7),0 0 32px rgba(255,0,160,0.55);
      flex-shrink:0;
    }
    .brand-title{
      font-size:1.45rem;
      background:linear-gradient(90deg,#4ef2ff,#ff2f92);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-weight:700;
      letter-spacing:0.06em;
      text-transform:uppercase;
      margin-bottom:6px; /* Increased margin */
    }
    .brand-sub{
      color:var(--muted);
      font-size:0.95rem;
      margin-top:4px; /* Increased margin */
    }
    .lesson-title{
      margin-top:18px; /* Increased margin */
      font-size:1.35rem; /* Slightly larger for emphasis */
      color:var(--accent-cyan);
      text-shadow:0 0 12px rgba(78,242,255,0.5);
    }

    .controls-row{
      display:flex;
      flex-wrap:wrap;
      gap:14px; /* Increased gap */
      margin-top:18px; /* Increased margin */
      font-size:0.9rem;
    }
    .small-btn{
      padding:8px 14px; /* Slightly larger padding */
      border-radius:999px;
      border:1px dashed rgba(255,255,255,0.35);
      background:transparent;
      color:#fff;
      cursor:pointer;
      font-size:0.85rem; /* Slightly larger font */
      display:inline-flex;
      align-items:center;
      gap:8px; /* Increased gap */
      transition:all var(--transition-fast);
    }
    .small-btn:hover{
      border-color:var(--accent-cyan);
      box-shadow:0 0 16px rgba(78,242,255,0.5);
      background:rgba(4,10,40,0.9);
    }

    /* TABS */
    .tabs{
      display:flex;
      flex-wrap:wrap;
      gap:14px; /* Increased gap */
      margin-bottom:28px; /* Increased margin */
      padding-bottom:8px;
      border-bottom:1px solid rgba(255,255,255,0.1);
    }
    .tab{
      padding:12px 20px; /* Increased padding */
      border-radius:var(--radius-md);
      background:var(--card-soft-bg);
      border:1px solid transparent;
      cursor:pointer;
      font-size:0.95rem; /* Slightly larger font */
      font-weight:600;
      color:var(--muted);
      transition:all var(--transition-fast);
      position:relative;
      overflow:hidden;
      flex-shrink:0;
    }
    .tab:hover:not(.active){
      color:#fff;
      border-color:rgba(78,242,255,0.4);
      box-shadow:0 0 18px rgba(78,242,255,0.25);
    }
    .tab.active{
      color:var(--accent-cyan);
      border-color:var(--accent-cyan);
      background:rgba(28,31,59,0.95);
      box-shadow:0 0 24px rgba(78,242,255,0.6);
      text-shadow:0 0 8px rgba(78,242,255,0.8);
    }
    .tab.completed::after {
      content: '‚úì';
      position: absolute;
      top: 4px;
      right: 6px;
      font-size: 0.7em;
      color: var(--accent-green);
      text-shadow: 0 0 5px var(--accent-green);
    }

    /* PANEL CONTENT */
    .panel{
      display:none;
      background:var(--card-bg);
      border-radius:var(--radius-lg);
      padding:32px; /* Increased padding */
      border:1px solid var(--border-glow);
      box-shadow:var(--shadow-strong);
      min-height:400px;
    }
    .panel.active{display:block;}

    .card-inner{
      display:flex;
      flex-direction:column;
      gap:24px; /* Increased gap */
    }

    .section-title{
      font-size:1.8rem; /* Slightly larger */
      color:var(--accent-pink);
      text-shadow:0 0 10px rgba(255,47,146,0.6);
      margin-bottom:12px; /* Increased margin */
      font-weight:700;
    }
    .section-sub{
      font-size:1.1rem; /* Slightly larger */
      color:var(--muted);
      margin-bottom:20px; /* Increased margin */
    }
    .sub-title{
      font-size:1.4rem; /* Slightly larger */
      color:var(--accent-yello);
      margin-top:28px; /* Increased margin */
      margin-bottom:14px; /* Increased margin */
      font-weight:600;
    }

    .explanation-block{
      background:var(--card-soft-bg);
      border-left:4px solid var(--accent-purple);
      padding:20px; /* Increased padding */
      border-radius:var(--radius-md);
      margin-bottom:20px; /* Increased margin */
    }
    .explanation-block p{margin-bottom:10px;} /* Increased margin */
    .explanation-block strong{color:var(--accent-cyan);}
    .explanation-block em{color:var(--accent-yello);font-style:normal;}

    .example-block{
      background:rgba(18,21,50,0.7);
      border:1px solid rgba(78,242,255,0.3);
      border-radius:var(--radius-md);
      padding:20px; /* Increased padding */
      margin-bottom:20px; /* Increased margin */
    }
    .example-en{
      font-size:1.6rem; /* Larger font */
      font-weight:700;
      color:var(--accent-green);
      text-shadow:0 0 10px rgba(77,255,155,0.5);
      margin-bottom:10px; /* Increased margin */
      display:flex;
      align-items:center;
      gap:12px; /* Increased gap */
    }
    .example-pt{
      font-size:1.1rem; /* Slightly larger */
      color:var(--muted);
      margin-top:8px; /* Increased margin */
    }
    .super-tip{
      background:rgba(255,226,95,0.1);
      border-left:4px solid var(--accent-yello);
      padding:16px; /* Increased padding */
      border-radius:var(--radius-sm);
      font-size:0.95rem; /* Slightly larger */
      color:#ffe25f;
      margin-top:16px; /* Increased margin */
    }

    .block-container{
      display:flex;
      flex-wrap:wrap;
      gap:10px; /* Increased gap */
      margin-top:12px; /* Increased margin */
      margin-bottom:18px; /* Increased margin */
    }
    .block-item{
      background:rgba(78,242,255,0.15);
      border:1px solid var(--accent-cyan);
      padding:8px 14px; /* Slightly larger padding */
      border-radius:var(--radius-sm);
      font-weight:600;
      color:var(--accent-cyan);
      text-shadow:0 0 5px rgba(78,242,255,0.5);
    }

    .micro-practice-section{
      background:var(--card-soft-bg);
      border-top:1px solid rgba(255,255,255,0.1);
      padding-top:24px; /* Increased padding */
      margin-top:24px; /* Increased margin */
    }
    .micro-practice-section h4{
      font-size:1.2rem; /* Slightly larger */
      color:var(--accent-yello);
      margin-bottom:14px; /* Increased margin */
    }
    .micro-practice-input-group{
      display:flex;
      flex-wrap:wrap;
      gap:10px; /* Increased gap */
      align-items:center;
      margin-bottom:12px; /* Increased margin */
    }
    .micro-practice-input-group input{
      background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.3);
      border-radius:var(--radius-sm);
      padding:8px 12px; /* Slightly larger padding */
      color:#fff;
      font-size:1rem; /* Slightly larger font */
      flex-grow:1;
      max-width:200px;
    }
    .micro-practice-input-group input:focus{
      border-color:var(--accent-cyan);
      box-shadow:0 0 8px rgba(78,242,255,0.5);
      outline:none;
    }
    .micro-practice-input-group button{
      padding:8px 16px; /* Slightly larger padding */
      background:var(--accent-pink);
      color:#fff;
      border:none;
      border-radius:var(--radius-sm);
      cursor:pointer;
      font-weight:600;
      transition:background var(--transition-fast);
    }
    .micro-practice-input-group button:hover{background:#ff4aab;}
    .feedback-message{
      margin-top:10px; /* Increased margin */
      font-size:0.95rem; /* Slightly larger */
      font-weight:600;
    }

    .exercise-section{
      background:var(--card-soft-bg);
      border-top:1px solid rgba(255,255,255,0.1);
      padding-top:24px; /* Increased padding */
      margin-top:24px; /* Increased margin */
    }
    .exercise-section h3{
      font-size:1.3rem; /* Slightly larger */
      color:var(--accent-green);
      margin-bottom:16px; /* Increased margin */
    }
    .exercise-item{
      margin-bottom:20px; /* Increased margin */
    }
    .exercise-item p{
      margin-bottom:10px; /* Increased margin */
      font-size:1.05rem; /* Slightly larger */
    }
    .exercise-item input[type="text"]{
      width:100%;
      background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.3);
      border-radius:var(--radius-sm);
      padding:10px 14px; /* Slightly larger padding */
      color:#fff;
      font-size:1rem; /* Slightly larger font */
    }
    .exercise-item input[type="text"]:focus{
      border-color:var(--accent-cyan);
      box-shadow:0 0 8px rgba(78,242,255,0.5);
      outline:none;
    }
    .exercise-section .check-btn{
      padding:10px 20px; /* Slightly larger padding */
      background:var(--accent-pink);
      color:#fff;
      border:none;
      border-radius:var(--radius-md);
      cursor:pointer;
      font-weight:700;
      font-size:1rem; /* Slightly larger font */
      margin-top:10px; /* Increased margin */
      transition:background var(--transition-fast), box-shadow var(--transition-fast);
    }
    .exercise-section .check-btn:hover{
      background:#ff4aab;
      box-shadow:0 0 18px rgba(255,74,171,0.6);
    }

    /* TEXTAREA FOR FREE WRITING */
    #write-area-container{
      margin-top:28px; /* Increased margin */
      background:var(--card-soft-bg);
      border-radius:var(--radius-md);
      padding:20px; /* Increased padding */
      border:1px solid rgba(255,255,255,0.15);
    }
    #write-area-container h3{
      color:var(--accent-yello);
      margin-bottom:14px; /* Increased margin */
      font-size:1.3rem; /* Slightly larger */
    }
    #write-area{
      width:100%;
      min-height:150px;
      background:rgba(0,0,0,0.2);
      border:1px solid rgba(255,255,255,0.3);
      border-radius:var(--radius-sm);
      padding:12px; /* Increased padding */
      color:#fff;
      font-size:1rem; /* Slightly larger font */
      line-height:1.6;
      resize:vertical;
    }
    #write-area:focus{
      border-color:var(--accent-cyan);
      box-shadow:0 0 8px rgba(78,242,255,0.5);
      outline:none;
    }
    .char-counter{
      font-size:0.85rem; /* Slightly larger */
      color:var(--muted);
      text-align:right;
      margin-top:8px; /* Increased margin */
    }

    /* AUDIO PRACTICE */
    .audio-practice-section{
      background:var(--card-soft-bg);
      border-top:1px solid rgba(255,255,255,0.1);
      padding-top:24px; /* Increased padding */
      margin-top:24px; /* Increased margin */
    }
    .audio-practice-section h3{
      font-size:1.3rem; /* Slightly larger */
      color:var(--accent-purple);
      margin-bottom:16px; /* Increased margin */
    }
    .record-btn{
      display:inline-flex;
      align-items:center;
      gap:10px; /* Increased gap */
      padding:12px 24px; /* Increased padding */
      background:rgba(255,255,255,0.1);
      border:1px solid var(--accent-purple);
      border-radius:var(--radius-md);
      color:#fff;
      font-size:1rem; /* Slightly larger font */
      font-weight:600;
      cursor:pointer;
      transition:all var(--transition-med);
      margin-bottom:14px; /* Increased margin */
    }
    .record-btn:hover{
      background:rgba(170,93,255,0.2);
      box-shadow:0 0 20px rgba(170,93,255,0.6);
    }
    .record-btn.recording{
      background:rgba(255,0,0,0.2);
      border-color:red;
      box-shadow:0 0 25px rgba(255,0,0,0.7);
      animation:pulse-red 1.5s infinite;
    }
    @keyframes pulse-red {
      0% {box-shadow:0 0 10px rgba(255,0,0,0.4);}
      50% {box-shadow:0 0 25px rgba(255,0,0,0.9);}
      100% {box-shadow:0 0 10px rgba(255,0,0,0.4);}
    }
    .record-dot{font-size:1.2rem;} /* Slightly larger */
    #audio-status{
      font-size:0.95rem; /* Slightly larger */
      color:var(--muted);
      margin-top:10px; /* Increased margin */
    }

    /* FOOTER */
    .footer-nav{
      display:flex;
      justify-content:space-between;
      margin-top:32px; /* Increased margin */
      padding-top:20px; /* Increased padding */
      border-top:1px solid rgba(255,255,255,0.1);
    }
    .footer-nav button{
      padding:12px 24px; /* Increased padding */
      background:var(--card-soft-bg);
      border:1px solid var(--border-glow);
      border-radius:var(--radius-md);
      color:#fff;
      font-size:1rem; /* Slightly larger font */
      font-weight:600;
      cursor:pointer;
      transition:all var(--transition-fast);
    }
    .footer-nav button:hover{
      background:rgba(28,31,59,0.95);
      box-shadow:0 0 18px rgba(120,120,255,0.4);
    }
    .footer-nav button:disabled{
      opacity:0.5;
      cursor:not-allowed;
      box-shadow:none;
    }

    .export-bar{
      display:flex;
      justify-content:flex-end;
      gap:12px; /* Increased gap */
      margin-top:20px; /* Increased margin */
      padding-top:16px; /* Increased padding */
      border-top:1px dashed rgba(255,255,255,0.1);
    }
    .export-bar button{
      padding:10px 18px; /* Slightly larger padding */
      background:var(--card-soft-bg);
      border:1px solid rgba(255,255,255,0.2);
      border-radius:var(--radius-sm);
      color:var(--muted);
      font-size:0.85rem; /* Slightly larger font */
      cursor:pointer;
      transition:all var(--transition-fast);
    }
    .export-bar button:hover{
      border-color:var(--accent-yello);
      color:#fff;
      background:rgba(255,226,95,0.1);
    }
    .footer-meta{
      text-align:center;
      color:var(--muted);
      font-size:0.8rem;
      margin-top:20px; /* Increased margin */
    }

    /* Specific adjustments for ADHD focus */
    .highlight-word {
      color: var(--accent-cyan);
      font-weight: bold;
      text-shadow: 0 0 5px rgba(78,242,255,0.7);
    }
    .important-note {
      color: var(--accent-pink);
      font-weight: bold;
      text-shadow: 0 0 5px rgba(255,47,146,0.7);
    }
    .portuguese-tip {
      color: var(--accent-yello);
      font-style: italic;
    }
    .structure-line {
      display: block;
      margin: 8px 0;
      font-family: 'Courier New', Courier, monospace;
      background-color: rgba(0,0,0,0.3);
      padding: 6px 10px;
      border-radius: var(--radius-sm);
      border-left: 3px solid var(--accent-purple);
    }
    .structure-line .part {
      color: var(--accent-cyan);
      font-weight: bold;
    }
    .structure-line .connector {
      color: var(--muted);
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="neon-header">
      <div class="header-main">
        <div class="teacher-orb"></div>
        <div>
          <h1 class="brand-title">NEXTATION</h1>
          <p class="brand-sub">Sua jornada para a flu√™ncia em ingl√™s</p>
        </div>
      </div>
      <h2 class="lesson-title">Modal Verbs: Can, Must, Should (Habilidade, Obriga√ß√£o, Conselho)</h2>
    </header>

    <nav class="tabs" role="tablist">
      <button class="tab" data-tab="overview" role="tab" aria-controls="panel-overview" aria-selected="false" onclick="showTab('overview')">üß† Overview</button>
      <button class="tab" data-tab="can-speak" role="tab" aria-controls="panel-can-speak" aria-selected="false" onclick="showTab('can-speak')">üó£Ô∏è I can speak English.</button>
      <button class="tab" data-tab="must-finish" role="tab" aria-controls="panel-must-finish" aria-selected="false" onclick="showTab('must-finish')">üìù She must finish the report.</button>
      <button class="tab" data-tab="should-drink" role="tab" aria-controls="panel-should-drink" aria-selected="false" onclick="showTab('should-drink')">üíß You should drink more water.</button>
      <button class="tab" data-tab="practice-time" role="tab" aria-controls="panel-practice-time" aria-selected="false" onclick="showTab('practice-time')">‚úçÔ∏è Practice Time!</button>
      <button class="tab" data-tab="talk-it-out" role="tab" aria-controls="panel-talk-it-out" aria-selected="false" onclick="showTab('talk-it-out')">üéß Talk it Out!</button>
    </nav>

    <main class="content">
      <!-- Overview Tab -->
      <section id="panel-overview" class="panel" role="tabpanel" aria-labelledby="tab-overview">
        <div class="card-inner">
          <h2 class="section-title">üß† Overview: Modal Verbs (Can, Must, Should)</h2>
          <p class="section-sub">Modal verbs s√£o verbos "ajudantes" que expressam coisas como <span class="highlight-word">habilidade</span>, <span class="highlight-word">obriga√ß√£o</span>, <span class="highlight-word">permiss√£o</span>, <span class="highlight-word">conselho</span>, e <span class="highlight-word">possibilidade</span>. Eles s√£o super importantes para dar nuance √†s suas frases em ingl√™s!</p>

          <div class="explanation-block">
            <p><strong>A Regra de Ouro dos Modais:</strong></p>
            <p>Imagine que os verbos modais s√£o como super-her√≥is: eles n√£o precisam de ajuda de ningu√©m (tipo o "do/does" para fazer perguntas) e nunca mudam a forma do verbo principal!</p>
            <p>A estrutura √© sempre:</p>
            <p class="structure-line"><span class="part">SUJEITO</span> <span class="connector">+</span> <span class="part">MODAL VERB</span> <span class="connector">+</span> <span class="part">VERBO PRINCIPAL (na forma base, sem "to")</span> <span class="connector">+</span> <span class="part">RESTO DA FRASE</span></p>
            <p>E o mais importante: o modal <span class="important-note">NUNCA MUDA</span>, mesmo com "He/She/It"! O verbo principal tamb√©m fica sempre na base.</p>
            <p class="portuguese-tip"><strong>√â nosso!</strong> Pense que o modal j√° "carrega" a ideia de tempo ou modo, ent√£o o verbo principal n√£o precisa se preocupar em mudar.</p>
          </div>

          <h3 class="sub-title">Principais Modal Verbs que vamos ver:</h3>
          <div class="explanation-block">
            <ul>
              <li><strong>CAN:</strong> Expressa <span class="highlight-word">habilidade</span> ou <span class="highlight-word">permiss√£o</span>. (Eu consigo / Eu posso)</li>
              <li><strong>MUST:</strong> Expressa <span class="highlight-word">obriga√ß√£o forte</span> ou <span class="highlight-word">dedu√ß√£o l√≥gica</span>. (Eu devo / Eu tenho que)</li>
              <li><strong>SHOULD:</strong> Expressa <span class="highlight-word">conselho</span> ou <span class="highlight-word">recomenda√ß√£o</span>. (Eu deveria)</li>
            </ul>
            <p class="portuguese-tip"><strong>ADHD Helper:</strong> Para n√≥s, brasileiros, √© f√°cil querer colocar um "-s" no verbo principal depois de "He/She/It" ou mudar o modal. Mas com modais, √© sempre o mesmo modal e o verbo na base! üí™</p>
          </div>

          <h3 class="sub-title">Vamos construir uma frase juntos!</h3>
          <div class="exercise-section">
            <p>Monte a frase: "Eu posso te ajudar."</p>
            <div class="micro-practice-input-group">
              <input type="text" id="overview-ex1-1" placeholder="Sujeito" />
              <input type="text" id="overview-ex1-2" placeholder="Modal + Verbo" />
              <input type="text" id="overview-ex1-3" placeholder="Resto" />
              <button onclick="checkMicroPractice('overview-ex1', ['I', 'can help', 'you'], 'I can help you.')">Checar</button>
            </div>
            <p id="overview-ex1-feedback" class="feedback-message"></p>
          </div>
        </div>
      </section>

      <!-- Tab: I can speak English. -->
      <section id="panel-can-speak" class="panel" role="tabpanel" aria-labelledby="tab-can-speak">
        <div class="card-inner">
          <h2 class="section-title">üó£Ô∏è I can speak English. (Habilidade)</h2>
          <p class="section-sub">Aqui usamos <span class="highlight-word">CAN</span> para falar sobre uma <span class="highlight-word">habilidade</span> que voc√™ possui.</p>

          <div class="example-block">
            <div class="example-en">
              <button class="speak-btn" onclick="speak('I can speak English.')">üîä</button>
              I can speak English.
            </div>
            <p class="example-pt">Eu posso falar ingl√™s.</p>
            <div class="block-container">
              <span class="block-item">I</span>
              <span class="block-item">can speak</span>
              <span class="block-item">English.</span>
            </div>
            <div class="super-tip">
              <p><strong>ADHD Helper:</strong> Perceba que "can" n√£o mudou e "speak" est√° na forma base. √â sempre assim com modais! N√£o existe "I can speaks" ou "She cans speak".</p>
              <p class="portuguese-tip"><strong>√â nosso!</strong> Em portugu√™s, falamos "Eu posso falar". O "posso" j√° indica a capacidade. Em ingl√™s, "can" faz esse papel.</p>
            </div>
          </div>

          <div class="micro-practice-section">
            <h4>Micro-Pr√°tica: Monte a frase "Eu posso falar ingl√™s."</h4>
            <div class="micro-practice-input-group">
              <input type="text" id="can-speak-1" placeholder="Sujeito" />
              <input type="text" id="can-speak-2" placeholder="Modal + Verbo" />
              <input type="text" id="can-speak-3" placeholder="Resto" />
              <button onclick="checkMicroPractice('can-speak', ['I', 'can speak', 'English'], 'I can speak English.')">Checar</button>
            </div>
            <p id="can-speak-feedback" class="feedback-message"></p>
          </div>

          <div class="micro-practice-section">
            <h4>Outra pr√°tica: "Ela consegue nadar muito bem."</h4>
            <div class="micro-practice-input-group">
              <input type="text" id="can-speak-ex2-1" placeholder="Sujeito" />
              <input type="text" id="can-speak-ex2-2" placeholder="Modal + Verbo" />
              <input type="text" id="can-speak-ex2-3" placeholder="Resto" />
              <button onclick="checkMicroPractice('can-speak-ex2', ['She', 'can swim', 'very well'], 'She can swim very well.')">Checar</button>
            </div>
            <p id="can-speak-ex2-feedback" class="feedback-message"></p>
          </div>
        </div>
      </section>

      <!-- Tab: She must finish the report. -->
      <section id="panel-must-finish" class="panel" role="tabpanel" aria-labelledby="tab-must-finish">
        <div class="card-inner">
          <h2 class="section-title">üìù She must finish the report. (Obriga√ß√£o)</h2>
          <p class="section-sub">Usamos <span class="highlight-word">MUST</span> para expressar uma <span class="highlight-word">obriga√ß√£o forte</span>, algo que √© necess√°rio ou muito importante.</p>

          <div class="example-block">
            <div class="example-en">
              <button class="speak-btn" onclick="speak('She must finish the report.')">üîä</button>
              She must finish the report.
            </div>
            <p class="example-pt">Ela deve terminar o relat√≥rio.</p>
            <div class="block-container">
              <span class="block-item">She</span>
              <span class="block-item">must finish</span>
              <span class="block-item">the report.</span>
            </div>
            <div class="super-tip">
              <p><strong>ADHD Helper:</strong> Lembre-se, mesmo com "She", o "must" n√£o muda e "finish" fica na base. N√£o √© "She musts finish" nem "She must finishes".</p>
              <p class="portuguese-tip"><strong>√â nosso!</strong> Em portugu√™s, "Ela deve terminar" ou "Ela tem que terminar". "Must" √© o equivalente mais direto para essa obriga√ß√£o.</p>
            </div>
          </div>

          <div class="micro-practice-section">
            <h4>Micro-Pr√°tica: Monte a frase "Ela deve terminar o relat√≥rio."</h4>
            <div class="micro-practice-input-group">
              <input type="text" id="must-finish-1" placeholder="Sujeito" />
              <input type="text" id="must-finish-2" placeholder="Modal + Verbo" />
              <input type="text" id="must-finish-3" placeholder="Resto" />
              <button onclick="checkMicroPractice('must-finish', ['She', 'must finish', 'the report'], 'She must finish the report.')">Checar</button>
            </div>
            <p id="must-finish-feedback" class="feedback-message"></p>
          </div>

          <div class="micro-practice-section">
            <h4>Outra pr√°tica: "N√≥s devemos ir agora."</h4>
            <div class="micro-practice-input-group">
              <input type="text" id="must-finish-ex2-1" placeholder="Sujeito" />
              <input type="text" id="must-finish-ex2-2" placeholder="Modal + Verbo" />
              <input type="text" id="must-finish-ex2-3" placeholder="Resto" />
              <button onclick="checkMicroPractice('must-finish-ex2', ['We', 'must go', 'now'], 'We must go now.')">Checar</button>
            </div>
            <p id="must-finish-ex2-feedback" class="feedback-message"></p>
          </div>
        </div>
      </section>

      <!-- Tab: You should drink more water. -->
      <section id="panel-should-drink" class="panel" role="tabpanel" aria-labelledby="tab-should-drink">
        <div class="card-inner">
          <h2 class="section-title">üíß You should drink more water. (Conselho)</h2>
          <p class="section-sub">Utilizamos <span class="highlight-word">SHOULD</span> para dar <span class="highlight-word">conselhos</span>, sugest√µes ou expressar o que seria o ideal a fazer.</p>

          <div class="example-block">
            <div class="example-en">
              <button class="speak-btn" onclick="speak('You should drink more water.')">üîä</button>
              You should drink more water.
            </div>
            <p class="example-pt">Voc√™ deveria beber mais √°gua.</p>
            <div class="block-container">
              <span class="block-item">You</span>
              <span class="block-item">should drink</span>
              <span class="block-item">more water.</span>
            </div>
            <div class="super-tip">
              <p><strong>ADHD Helper:</strong> "Should" √© como um amigo que te d√° uma boa dica. E, como todos os modais, ele n√£o muda para "He/She/It" e o verbo principal (drink) fica na base.</p>
              <p class="portuguese-tip"><strong>√â nosso!</strong> O "deveria" em portugu√™s √© o par perfeito para "should".</p>
            </div>
          </div>

          <div class="micro-practice-section">
            <h4>Micro-Pr√°tica: Monte a frase "Voc√™ deveria beber mais √°gua."</h4>
            <div class="micro-practice-input-group">
              <input type="text" id="should-drink-1" placeholder="Sujeito" />
              <input type="text" id="should-drink-2" placeholder="Modal + Verbo" />
              <input type="text" id="should-drink-3" placeholder="Resto" />
              <button onclick="checkMicroPractice('should-drink', ['You', 'should drink', 'more water'], 'You should drink more water.')">Checar</button>
            </div>
            <p id="should-drink-feedback" class="feedback-message"></p>
          </div>

          <div class="micro-practice-section">
            <h4>Outra pr√°tica: "Ele deveria estudar mais."</h4>
            <div class="micro-practice-input-group">
              <input type="text" id="should-drink-ex2-1" placeholder="Sujeito" />
              <input type="text" id="should-drink-ex2-2" placeholder="Modal + Verbo" />
              <input type="text" id="should-drink-ex2-3" placeholder="Resto" />
              <button onclick="checkMicroPractice('should-drink-ex2', ['He', 'should study', 'more'], 'He should study more.')">Checar</button>
            </div>
            <p id="should-drink-ex2-feedback" class="feedback-message"></p>
          </div>
        </div>
      </section>

      <!-- Practice Time! Tab -->
      <section id="panel-practice-time" class="panel" role="tabpanel" aria-labelledby="tab-practice-time">
        <div class="card-inner">
          <h2 class="section-title">‚úçÔ∏è Practice Time! (Hora de Praticar!)</h2>
          <p class="section-sub">Agora √© a sua vez de colocar em pr√°tica o que aprendeu sobre os Modal Verbs. Lembre-se da regra de ouro: <span class="important-note">Modal + Verbo na base, sem mudan√ßas!</span></p>

          <div class="exercise-section">
            <h3>Exerc√≠cio 1: Transforme as frases usando o Modal Verb indicado.</h3>
            <p class="portuguese-tip">Escreva a frase completa em ingl√™s.</p>

            <div class="exercise-item">
              <p>1. Eu (can) dirigir um carro. (I drive a car.)</p>
              <input type="text" id="write-ex1-1" placeholder="Sua resposta aqui" />
            </div>
            <div class="exercise-item">
              <p>2. Ela (must) ir ao m√©dico. (She goes to the doctor.)</p>
              <input type="text" id="write-ex1-2" placeholder="Sua resposta aqui" />
            </div>
            <div class="exercise-item">
              <p>3. N√≥s (should) comer mais vegetais. (We eat more vegetables.)</p>
              <input type="text" id="write-ex1-3" placeholder="Sua resposta aqui" />
            </div>
            <div class="exercise-item">
              <p>4. Ele (can) tocar viol√£o. (He plays guitar.)</p>
              <input type="text" id="write-ex1-4" placeholder="Sua resposta aqui" />
            </div>
            <div class="exercise-item">
              <p>5. Eles (must) estudar para a prova. (They study for the test.)</p>
              <input type="text" id="write-ex1-5" placeholder="Sua resposta aqui" />
            </div>
            <button class="check-btn" onclick="checkWritingExercise1()">Verificar Respostas</button>
            <p id="write-ex1-feedback" class="feedback-message"></p>
          </div>

          <div id="write-area-container">
            <h3>Escreva suas pr√≥prias frases com Modal Verbs!</h3>
            <p class="section-sub">Crie 3 a 5 frases usando CAN, MUST ou SHOULD. Pense em situa√ß√µes do seu dia a dia.</p>
            <textarea id="write-area" placeholder="Ex: I can cook pasta. You must finish your homework. We should go to the beach."></textarea>
            <div class="char-counter" id="char-counter">0 caracteres</div>
          </div>
        </div>
      </section>

      <!-- Talk it Out! Tab -->
      <section id="panel-talk-it-out" class="panel" role="tabpanel" aria-labelledby="tab-talk-it-out">
        <div class="card-inner">
          <h2 class="section-title">üéß Talk it Out! (Hora de Falar!)</h2>
          <p class="section-sub">A melhor forma de fixar √© praticar em voz alta! Use o bot√£o abaixo para marcar seu momento de pr√°tica. Nenhuma grava√ß√£o real √© feita, √© um compromisso com voc√™ mesmo!</p>

          <div class="audio-practice-section">
            <h3>Pratique suas frases com Modal Verbs!</h3>
            <p>Fale sobre suas habilidades, o que voc√™ deve fazer e o que voc√™ ou outras pessoas deveriam fazer.</p>
            <button id="record-btn" class="record-btn" onclick="toggleRecord()">
              <span id="record-dot">‚è∫Ô∏è</span> <span id="record-text">Marcar momento de pr√°tica</span>
            </button>
            <p id="audio-status" class="feedback-message">Nenhum √°udio real √© gravado ‚Äì use o bot√£o como compromisso de pr√°tica em voz alta. üéß</p>
            <button class="small-btn" onclick="resetPractice()">Resetar Pr√°tica</button>
          </div>

          <div class="explanation-block" style="margin-top: 28px;">
            <p><strong>Dica de Flu√™ncia:</strong> Tente usar os modal verbs em diferentes contextos. Por exemplo:</p>
            <ul>
              <li><span class="highlight-word">Can:</span> "I can play guitar, but I can't sing." (Habilidade) / "Can I help you?" (Permiss√£o/Oferecer ajuda)</li>
              <li><span class="highlight-word">Must:</span> "You must wear a seatbelt." (Obriga√ß√£o) / "It must be cold outside, everyone is wearing coats." (Dedu√ß√£o)</li>
              <li><span class="highlight-word">Should:</span> "You should try that new restaurant." (Conselho) / "I should call my mom." (Dever)</li>
            </ul>
            <p class="portuguese-tip">Quanto mais voc√™ pratica, mais natural fica! N√£o tenha medo de errar, o importante √© falar.</p>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer-nav">
      <button onclick="prevTab()">‚Üê Anterior</button>
      <button onclick="nextTab()">Pr√≥ximo ‚Üí</button>
    </footer>

    <div class="export-bar">
      <button onclick="copyToSpreadsheet()">üìã Copiar para Planilha</button>
      <button onclick="window.print()">üìÑ Exportar para PDF</button>
    </div>

    <p class="footer-meta">NEXTATION ¬© 2026 ‚Äì Todos os direitos reservados.</p>
  </div>

  <script>
    const tabOrder = ['overview', 'can-speak', 'must-finish', 'should-drink', 'practice-time', 'talk-it-out'];

    function normalizeSimple(text) {
      return text.toLowerCase().replace(/[.,!?\s]/g, '').trim();
    }

    function showTab(id) {
      document.querySelectorAll('.panel').forEach(panel => {
        panel.classList.remove('active');
      });
      document.getElementById(`panel-${id}`).classList.add('active');

      document.querySelectorAll('.tab').forEach(t => {
        const isActive = t.dataset.tab === id;
        t.classList.toggle('active', isActive);
        if(isActive) t.classList.add('completed'); // Mark tab as completed when visited
        t.setAttribute('aria-selected', isActive ? 'true' : 'false');
      });

      // Enable/disable nav buttons
      const activeIdx = tabOrder.indexOf(id);
      document.querySelector('.footer-nav button:first-child').disabled = activeIdx === 0;
      document.querySelector('.footer-nav button:last-child').disabled = activeIdx === tabOrder.length - 1;
    }

    function nextTab(){
      const active = document.querySelector('.tab.active');
      if(!active) return;
      const idx = tabOrder.indexOf(active.dataset.tab);
      if(idx < tabOrder.length-1) showTab(tabOrder[idx+1]);
    }

    function prevTab(){
      const active = document.querySelector('.tab.active');
      if(!active) return;
      const idx = tabOrder.indexOf(active.dataset.tab);
      if(idx > 0) showTab(tabOrder[idx-1]);
    }

    function speak(text){
      if(!('speechSynthesis' in window)){
        alert('Seu navegador n√£o suporta √°udio (SpeechSynthesis).');
        return;
      }
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'en-US';
      u.rate = 0.98;
      u.pitch = 1.0;
      window.speechSynthesis.speak(u);
    }

    // Micro Practice Check Function for block-by-block exercises
    function checkMicroPractice(exerciseId, correctAnswers, fullSentence) {
      let allCorrect = true;
      const inputs = [];
      for (let i = 1; i <= correctAnswers.length; i++) {
        const input = document.getElementById(`${exerciseId}-${i}`);
        inputs.push(input);
        if (input && normalizeSimple(input.value) !== normalizeSimple(correctAnswers[i-1])) {
          allCorrect = false;
        }
      }
      const feedback = document.getElementById(`${exerciseId}-feedback`);

      if (feedback) {
        if (allCorrect) {
          feedback.textContent = `Perfeito! "${fullSentence}" ‚úÖ`;
          feedback.style.color = '#4dff9b';
        } else {
          feedback.textContent = `Quase. Tente novamente. A frase completa √©: "${fullSentence}"`;
          feedback.style.color = '#ff8aa8';
        }
      }
    }

    // Writing Exercise 1: Transform sentences
    function checkWritingExercise1(){
      const q1 = document.getElementById('write-ex1-1').value;
      const q2 = document.getElementById('write-ex1-2').value;
      const q3 = document.getElementById('write-ex1-3').value;
      const q4 = document.getElementById('write-ex1-4').value;
      const q5 = document.getElementById('write-ex1-5').value;
      const feedback = document.getElementById('write-ex1-feedback');

      const targets = [
        'I can drive a car.',
        'She must go to the doctor.',
        'We should eat more vegetables.',
        'He can play guitar.',
        'They must study for the test.'
      ];

      let allCorrect = true;
      const userAnswers = [q1, q2, q3, q4, q5];
      for(let i=0; i<targets.length; i++){
        if(normalizeSimple(userAnswers[i]) !== normalizeSimple(targets[i])){
          allCorrect = false;
          break;
        }
      }

      if(allCorrect){
        feedback.textContent = 'Excelente! Todas as frases est√£o corretas com os Modal Verbs. ‚úÖ';
        feedback.style.color = '#4dff9b';
      }else{
        feedback.textContent = 'Algumas respostas est√£o incorretas. Revise a estrutura (Subject + Modal + Verb na base).';
        feedback.style.color = '#ff8aa8';
      }
    }

    const writeArea = document.getElementById('write-area');
    const counterEl = document.getElementById('char-counter');
    if(writeArea && counterEl){
      writeArea.addEventListener('input', () => {
        counterEl.textContent = writeArea.value.length + ' caracteres';
      });
    }

    let recording = false;
    function toggleRecord(){
      recording = !recording;
      const btn = document.getElementById('record-btn');
      const txt = document.getElementById('record-text');
      const dot = document.getElementById('record-dot');
      const status = document.getElementById('audio-status');
      if(!btn || !txt || !dot || !status) return;

      if(recording){
        btn.classList.add('recording');
        dot.textContent = 'üî¥';
        txt.textContent = 'Praticando agora...';
        status.innerHTML = 'Momento de pr√°tica: fale em voz alta suas frases com Modal Verbs. Use: <strong>I can speak, She must finish, You should drink</strong> e outros que voc√™ criar! üéß';
      }else{
        btn.classList.remove('recording');
        dot.textContent = '‚è∫Ô∏è';
        txt.textContent = 'Marcar momento de pr√°tica';
        status.textContent = 'Pr√°tica pausada. Clique de novo quando quiser focar na fala.';
      }
    }

    function resetPractice(){
      recording = false;
      const btn = document.getElementById('record-btn');
      const txt = document.getElementById('record-text');
      const dot = document.getElementById('record-dot');
      const status = document.getElementById('audio-status');
      if(!btn || !txt || !dot || !status) return;

      btn.classList.remove('recording');
      dot.textContent = '‚è∫Ô∏è';
      txt.textContent = 'Marcar momento de pr√°tica';
      status.innerHTML = 'Nenhum √°udio real √© gravado ‚Äì use o bot√£o como compromisso de pr√°tica em voz alta. üéß';
    }

    function copyToSpreadsheet(){
      const text = collectLessonText();
      if(!navigator.clipboard){
        alert('Seu navegador n√£o permite c√≥pia autom√°tica. Selecione o texto manualmente.');
        return;
      }
      navigator.clipboard.writeText(text).then(()=>{
        alert('Conte√∫do copiado! Cole (Ctrl+V) na sua planilha.');
      }).catch(()=>{
        alert('N√£o foi poss√≠vel copiar automaticamente. Selecione e copie manualmente.');
      });
    }

    function collectLessonText(){
      const blocks = [];
      document.querySelectorAll('.card-inner').forEach(inner=>{
        const clone = inner.cloneNode(true);
        // Remove interactive elements and non-content parts from the cloned content
        clone.querySelectorAll('button, input, textarea, select, label, .micro-practice-section, .super-tip, .char-counter, .feedback-message, .controls-row, .export-bar, .footer-nav, .footer-meta, .neon-header, .tabs, .app, .block-container, .example-en, .example-pt, .section-sub, .section-title, .sub-title, .exercise-section').forEach(el=>el.remove());
        // Clean up extra spaces/newlines
        let cleanedText = clone.innerText.trim();
        cleanedText = cleanedText.replace(/\s{2,}/g, ' '); // Replace multiple spaces with single space
        cleanedText = cleanedText.replace(/\n\s*\n/g, '\n\n'); // Replace multiple newlines with double newline
        blocks.push(cleanedText);
      });
      return blocks.join('\n\n-----------------------------\n\n');
    }

    // Initial tab display
    document.addEventListener('DOMContentLoaded', () => {
      showTab('overview');
    });
  </script>
</body>
</html>
